{% extends 'base.html' %}
{% block content %}
<nav class="flex justify-between items-center p-4 md:px-12 backdrop-blur-md bg-black/10 border-b border-white/5 fixed w-full top-0 z-40 transition-all duration-300">
    <div class="text-xl md:text-2xl font-bold tracking-tighter cursor-pointer hover:text-cyan-400 transition-colors truncate">{{ profile.profile_name }}<span class="text-cyan-500">.</span></div>
    <div class="hidden md:flex items-center gap-4">
        {% if session.get('admin') %} <a href="/dashboard" class="px-5 py-2 text-sm font-bold bg-cyan-600/20 text-cyan-400 border border-cyan-500/50 rounded-full hover:bg-cyan-600 hover:text-white transition-all">Dashboard</a> {% endif %}
        <button onclick="openModal('contactModal')" class="px-5 py-2 text-sm font-medium bg-white/10 hover:bg-white/20 rounded-full border border-white/10 hover:scale-105 transition-transform">Get in Touch</button>
        <div id="auth-display" class="hidden items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-cyan-600 rounded-full text-sm font-bold shadow-lg cursor-pointer hover:scale-105 transition-transform" onclick="clearIdentity()"><span id="auth-avatar" class="w-6 h-6 rounded-full bg-white/20 flex items-center justify-center text-xs"></span><span id="auth-name"></span></div>
        <button id="guest-btn" onclick="openModal('identityModal')" class="flex items-center gap-2 px-5 py-2 text-sm font-bold text-white hover:text-cyan-400 hover:scale-105 transition-transform"><i data-lucide="user-check" width="16"></i> Guest ID</button>
    </div>
    <div class="md:hidden"><button onclick="toggleMobileMenu()" class="p-2 text-gray-300"><i data-lucide="menu"></i></button></div>
</nav>

<div id="mobile-menu" class="fixed top-16 left-0 w-full bg-gray-900 border-b border-white/10 p-4 z-30 md:hidden hidden">
    <button onclick="openModal('contactModal'); toggleMobileMenu()" class="block w-full text-center py-3 bg-white/10 rounded-xl mb-2 text-white">Get in Touch</button>
    <button onclick="openModal('identityModal'); toggleMobileMenu()" class="block w-full text-center py-3 bg-gradient-to-r from-purple-600 to-cyan-600 rounded-xl mb-2 text-white font-bold">Guest ID</button>
    {% if session.get('admin') %} <a href="/dashboard" class="block w-full text-center py-3 bg-cyan-600 rounded-xl mb-2 text-white">Dashboard</a> {% endif %}
</div>

<section class="min-h-screen flex flex-col justify-center items-center px-4 pt-28 pb-12 relative">
    <div class="z-10 mb-8 animate-pulse"><div class="inline-block px-4 py-1.5 text-xs font-semibold tracking-widest text-cyan-400 uppercase bg-cyan-900/20 rounded-full border border-cyan-500/20 shadow-[0_0_10px_rgba(6,182,212,0.2)]">Welcome, My Dear!</div></div>
    <div class="max-w-7xl w-full flex flex-col-reverse md:flex-row items-center justify-center gap-8 md:gap-20 z-10 md:pl-24">
        <div class="flex-1 text-center md:text-left space-y-6">
            <h1 class="flex flex-col font-bold tracking-tight"><span class="text-2xl md:text-5xl text-gray-400 font-medium mb-1">Hii! I'm </span><span class="text-4xl md:text-7xl lg:text-8xl bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 via-purple-500 to-pink-500 drop-shadow-2xl font-orbitron">{{ profile.profile_name }}</span></h1>
            <div class="flex flex-col md:flex-row gap-4 text-gray-400 font-light justify-center md:justify-start items-center md:items-start">
                <span class="flex items-center gap-2"><i data-lucide="brain" class="text-purple-400"></i> Student | IIT Madras</span>
                <span class="hidden md:inline text-gray-600">|</span>
                <span class="flex items-center gap-2"><i data-lucide="globe" class="text-green-400"></i> Co-Founder | PRAMAANIK</span>
            </div>
            <div class="flex flex-wrap justify-center md:justify-start gap-4 pt-4">
                <a href="https://instagram.com/deepmani_mishra_/" target="_blank" rel="noopener noreferrer" class="social-link hover:scale-110 transition-transform"><i data-lucide="instagram"></i></a>
                <a href="https://facebook.com/brijratndeepmani.mishra" target="_blank" rel="noopener noreferrer" class="social-link hover:scale-110 transition-transform"><i data-lucide="facebook"></i></a>
                <a href="https://www.youtube.com/channel/UCRMFS8wvXnOcopJD5KQNv0Q" target="_blank" rel="noopener noreferrer" class="social-link hover:scale-110 transition-transform"><i data-lucide="youtube"></i></a>
                <a href="https://www.linkedin.com/in/deepmani-mishra-b9a225365/" target="_blank" rel="noopener noreferrer" class="social-link hover:scale-110 transition-transform"><i data-lucide="linkedin"></i></a>
                <a href="https://github.com/deepmanimishra" target="_blank" rel="noopener noreferrer" class="social-link hover:scale-110 transition-transform"><i data-lucide="github"></i></a>
            </div>
        </div>
        <div class="flex-none relative group cursor-pointer hover:scale-105 transition-transform" onclick="openModal('adminLoginModal')">
            <div class="relative w-48 h-48 md:w-80 md:h-80 rounded-full overflow-hidden border-2 border-white/10 bg-black shadow-2xl"><img src="{{ profile.profile_image }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"></div>
        </div>
    </div>
</section>

<section class="py-12 md:py-20 px-4 md:px-12 max-w-7xl mx-auto">
    <h2 class="text-2xl md:text-3xl font-bold text-center mb-12 text-white">About Me</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4">
        <div class="info-card hover:border-cyan-500/50 transition-colors"><div class="flex items-center gap-3 mb-3 text-cyan-400"><i data-lucide="code"></i><h3 class="font-bold">Academic Focus</h3></div><p class="text-gray-300">Pursuing BS in Data Science & Applications at IIT Madras. Specializing in Python, ML, and Statistical Analysis.</p></div>
        <div class="info-card hover:border-purple-500/50 transition-colors"><div class="flex items-center gap-3 mb-3 text-cyan-400"><i data-lucide="database"></i><h3 class="font-bold">Entrepreneurship</h3></div><p class="text-gray-300">Co-Founder of PRAMAANIK. Leading innovation in Cyber Security, focusing on data integrity.</p></div>
        <div class="info-card hover:border-cyan-500/50 transition-colors"><div class="flex items-center gap-3 mb-3 text-cyan-400"><i data-lucide="brain"></i><h3 class="font-bold">Vision</h3></div><p class="text-gray-300">Lead this Era with technology to solve real-world problems and build scalable ecosystems.</p></div>
        <div class="info-card hover:border-purple-500/50 transition-colors"><div class="flex items-center gap-3 mb-3 text-cyan-400"><i data-lucide="globe"></i><h3 class="font-bold">Goal</h3></div><p class="text-gray-300">Make India 'Vishwa Guru' in tech, innovation, AI, and many more. Become world's biggest tech identity.</p></div>
    </div>
</section>

<section class="py-12 md:py-20 px-4 md:px-12 bg-black/20 backdrop-blur-sm border-y border-white/5">
    <div class="max-w-7xl mx-auto">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-3xl font-bold text-white">Highlights</h2>
            {% if not session.get('admin') %} <button onclick="openModal('adminLoginModal')" class="flex items-center gap-2 text-gray-400 hover:text-white"><i data-lucide="lock" width="16"></i> Admin</button> {% else %} <a href="/dashboard" class="bg-cyan-600 px-4 py-2 rounded-lg text-white text-sm font-bold">Dashboard</a> {% endif %}
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6" id="posts-grid">
            {% for post in posts %}
            <div class="post-card group relative bg-white/5 border border-white/10 rounded-2xl overflow-hidden hover:border-cyan-500/50 transition-all duration-300 hover:-translate-y-2 cursor-pointer shadow-lg" 
                 onclick="openPostDetail(this)" 
                 data-id="{{ post.id }}" 
                 data-title="{{ post.title }}" 
                 data-desc="{{ post.description }}" 
                 data-image="{{ post.image_url }}" 
                 data-likes="{{ post.likes }}">
                <div class="aspect-square w-full bg-gray-900 relative overflow-hidden">
                    <img src="{{ post.image_url }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" onerror="this.style.display='none'">
                    {% if session.get('admin') %} <button onclick="event.stopPropagation(); deletePost({{ post.id }})" class="absolute top-2 right-2 bg-red-600 p-2 rounded-full text-white z-20 hover:bg-red-500"><i data-lucide="trash-2" width="14"></i></button> {% endif %}
                </div>
                <div class="p-5 relative"><h3 class="text-xl font-bold text-white mb-2">{{ post.title }}</h3><p class="text-gray-400 text-sm line-clamp-2">{{ post.description }}</p><div class="flex items-center gap-2 mt-4 text-gray-500 text-xs"><i data-lucide="heart" width="14"></i> {{ post.likes }}</div></div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="py-12 md:py-20 px-4 md:px-12 max-w-7xl mx-auto overflow-x-auto scrollbar-hide">
    <h2 class="text-3xl font-bold text-center mb-12 text-white">Journey</h2>
    <div class="flex gap-8 pb-8 min-w-max snap-x">
        {% for item in journey %}
        <div class="relative group bg-white/5 p-6 rounded-xl border border-white/10 w-80 min-w-[320px] hover:border-cyan-500/50 transition-all hover:scale-105 snap-center">
            <div class="text-xs font-bold text-cyan-400 uppercase mb-2">{{ item.year }}</div><h3 class="text-xl font-bold text-white mb-2">{{ item.title }}</h3><p class="text-gray-400 font-light text-sm">{{ item.description }}</p>
            {% if session.get('admin') %} <button onclick="event.stopPropagation(); deleteJourney({{ item.id }})" class="text-red-500 text-xs mt-2 hover:text-red-300">Delete</button> {% endif %}
        </div>
        {% endfor %}
    </div>
</section>

<section class="py-12 md:py-20 px-4 md:px-12 max-w-7xl mx-auto">
    <h2 class="text-3xl font-bold text-white mb-8">Documents</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {% for doc in documents %}
        <div class="group relative perspective-1000 cursor-pointer" onclick="openDocModal('{{ doc.file_path }}')">
            <div class="bg-gray-800 p-6 rounded-r-lg border-l-4 border-cyan-500 shadow-xl transform transition-all duration-500 group-hover:rotate-y-12 group-hover:scale-105 h-full flex flex-col justify-between">
                <div><i data-lucide="book-open" class="text-cyan-400 mb-4" width="32"></i><h4 class="font-bold text-white text-lg leading-tight mb-2">{{ doc.title }}</h4></div>
                <div class="text-xs text-gray-500 mt-4 flex items-center gap-1 uppercase tracking-wider">Click to Read <i data-lucide="arrow-right" width="12"></i></div>
            </div>
            {% if session.get('admin') %} <button onclick="event.stopPropagation(); deleteDocument({{ doc.id }})" class="absolute top-2 right-2 text-red-500 bg-black/50 rounded-full p-1 hover:bg-black/80"><i data-lucide="trash" width="14"></i></button> {% endif %}
        </div>
        {% endfor %}
    </div>
</section>

<section class="py-16 px-4 md:px-12">
    <div class="max-w-3xl mx-auto space-y-12">
        <!-- Smart Connect (Email removed) -->
        <div class="w-full bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-8 hover:border-cyan-500/40 transition-all hover:shadow-lg hover:shadow-cyan-900/20">
            <div class="flex items-center gap-3 mb-6"><div class="p-2 bg-purple-500/20 rounded-lg"><i data-lucide="sparkles" class="text-purple-400" width="24"></i></div><h3 class="text-2xl font-bold text-white">Smart Connect AI</h3></div>
            <p class="text-gray-400 mb-6 text-sm">Draft the perfect professional message instantly.</p>
            <div class="space-y-4">
                <input type="text" id="ai-connect-intent" placeholder="E.g. I want to discuss a project..." class="w-full bg-black/40 border border-white/10 rounded-xl px-5 py-3 text-white focus:outline-none focus:border-purple-500/50 focus:ring-1 focus:ring-purple-500 transition-all">
                <button onclick="generateConnectMessage()" id="ai-connect-btn" class="w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white font-bold py-3 rounded-xl transition-all shadow-lg">Draft Message</button>
            </div>
            <div id="ai-connect-result" class="hidden mt-6 bg-black/50 p-4 rounded-xl text-gray-300 text-sm font-mono relative border border-white/5"><span id="ai-connect-text"></span><button onclick="copyToClipboard()" class="absolute top-2 right-2 text-gray-400 hover:text-white"><i data-lucide="copy" width="14"></i></button></div>
        </div>
        
        <!-- Follow Card -->
        <div class="relative bg-gradient-to-br from-gray-900 to-black border border-white/10 rounded-2xl p-8 overflow-hidden group hover:border-cyan-500/40 transition-all hover:shadow-lg hover:shadow-cyan-900/20">
            <div class="absolute -top-10 -right-10 w-40 h-40 bg-cyan-500/10 rounded-full blur-3xl group-hover:bg-cyan-500/20 transition-all duration-700"></div>
            <div class="relative z-10">
                <div class="flex items-center gap-3 mb-6"><div class="p-2 bg-cyan-500/20 rounded-lg"><i data-lucide="mail" class="text-cyan-400" width="24"></i></div><h3 class="text-2xl font-bold text-white">Stay Updated</h3></div>
                <p class="text-gray-400 mb-6 text-sm">Join the network to follow my journey, projects, and latest updates directly.</p>
                <form onsubmit="submitFollow(event)" class="space-y-3">
                    <div class="relative"><i data-lucide="user" class="absolute left-4 top-3.5 text-gray-500" width="18"></i><input type="text" name="name" placeholder="Your Name" class="w-full bg-black/40 border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500 transition-all" required></div>
                    <div class="relative"><i data-lucide="at-sign" class="absolute left-4 top-3.5 text-gray-500" width="18"></i><input type="email" name="email" placeholder="Your Email Address" class="w-full bg-black/40 border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500 transition-all" required></div>
                    <button type="submit" class="w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold py-3 rounded-xl shadow-lg transform active:scale-[0.98] transition-all flex items-center justify-center gap-2">Follow Me <i data-lucide="arrow-right" width="16"></i></button>
                </form>
            </div>
        </div>
    </div>
</section>

<footer class="py-10 text-center text-gray-600 text-xs relative flex flex-col gap-2">
    <p>Â© {{ profile.profile_name }}. All rights reserved.</p>
    <p>Built with Flask & Three.js</p>
</footer>

<div id="docModal" class="hidden fixed inset-0 z-[90] flex items-center justify-center p-4"><div class="absolute inset-0 bg-black/95 backdrop-blur-md" onclick="closeModal('docModal')"></div><div class="relative w-full max-w-5xl h-[85vh] bg-gray-900 rounded-xl overflow-hidden shadow-2xl border border-white/10 flex flex-col animate-in zoom-in-95"><div class="flex justify-between items-center p-4 border-b border-white/10 bg-black/50"><h3 class="text-white font-bold">Document Viewer</h3><button onclick="closeModal('docModal')" class="text-white hover:text-red-400"><i data-lucide="x"></i></button></div><iframe id="doc-iframe" src="" class="w-full flex-1 bg-white"></iframe></div></div>

{% include 'modals.html' %} 
{% endblock %}